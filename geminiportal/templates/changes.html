{% extends "base.html" %}

{% block body %}
  <h2>Changes</h2>
  <h3>2023-11-13</h3>
  <ul>
    <li>Moved the response details from the top of the page to the bottom of the page.</li>
    <li>Updated styling for text input boxes.</li>
    <li>Fixed consecutive slashes being erroneously compressed in gopher queries.</li>
    <li>Fixed handling of gopher menus items with empty <i>port</i> components.</li>
  </ul>
  <h3>2023-10-08</h3>
  <ul>
    <li>Fixed username/password components from being stripped from links,
      for example in <i>mailto://</i> URLs.</li>
  </ul>
  <h3>2023-08-13</h3>
  <ul>
    <li>Gopher menus now use icons for item types.
      The icons were borrowed from <a href="https://www.apache.org/icons/">apache's httpd</a>
      and are licensed under public domain.</li>
    <li>Fixed missing line breaks in <i>text/gemini</i> pages when using Lynx (if you use Lynx, you should
      also set <i>COLLAPSE_BR_TAGS:FALSE</i> in your browser config to preserve blank lines).</li>
    <li>Fiddling around with the site style.</li>
  </ul>
  <h3>2023-08-09</h3>
  <ul>
    <li>Text responses that are not valid UTF-8 will now use the <a href="https://github.com/chardet/chardet">chardet</a>
      library to attempt to guess the correct character encoding. The desired file encoding can also be indicated by
      appending <i>?charset=...</i> to the end of the URL.</li>
    <li>The following response types will now be displayed inside of an iframe preview window:
      <ul>
        <li><i>text/html</i></li>
        <li><i>text/xml</i></li>
        <li><i>application/pdf</i></li>
        <li><i>application/json</i></li>
      </ul>
    </li>
    <li>Bumped max line width from <i>80ch</i> to <i>100ch</i>.</li>
  </ul>
  <h3>2023-08-04</h3>
  <ul>
    <li>Unhandled file types under 1 MB are now displayed as <i>data://</i> links instead of being opened directly.</li>
  </ul>
  <h3>2023-08-03</h3>
  <h4>Gopher+</h4>
  <p>This update adds initial support for the <a href="https://github.com/gopher-protocol/gopher-plus">Gopher+ protocol</a>! ðŸŽ‰</p>
  <ul>
    <li>Gopher+ URLs are now fully supported, per <a href="https://datatracker.ietf.org/doc/html/rfc4266">RFC 4266</a>.</li>
    <li>Gopher menus will include an [i] icon next to Gopher+ capable links.</li>
    <li>There's a new [gopher+ info] shortcut below the URL bar.</li>
    <li>Gopher+ attributes will be rendered using as <em>application/gopher+-attribute</em>.</li>
    <li>ASK blocks are not supported yet.</li>
  </ul>
  <p>Here are some example URLs to try it out:</p>
  <ul>
    <li><a href="/gopher/gopher.quux.org/1%2509%2509+">gopher://gopher.quux.org/1%09%09+</a> <i>(gopher+ menu)</i></li>
    <li><a href="/gopher/gopher.quux.org/1%2509%2509!">gopher://gopher.quux.org/1%09%09!</a> <i>(gopher+ attributes, single item)</i></li>
    <li><a href="/gopher/gopher.quux.org/1%2509%2509$">gopher://gopher.quux.org/1%09%09$</a> <i>(gopher+ attributes, directory)</i></li>
  </ul>
  <h4>Other Changes</h4>
  <ul>
    <li>The HTML title and favicon are now set dynamically based on the proxied response.</li>
    <li>The Response Details table is new minimized by default to reduce visual clutter.</li>
    <li><i>gopher://</i> URLs will now have their path component percent-encoded. Although
      this is not required by the RFC, I have found that gopher URLs that contain special
      characters such as spaces will confuse most URL-parsing libraries.</li>
    <li>Ports 77 and 8070 are now whitelisted for proxy requests.</li>
    <li>Fixed emoji detection to work with multi-codepoint sequences.</li>
    <li>Fixed empty gopher info lines being collapsed.</li>
  </ul>
  <h3>2023-07-17</h3>
  <ul>
    <li>Fixed a bug causing large responses to be truncated.</li>
  </ul>
  <h3>2023-07-12</h3>
  <ul>
    <li>Renamed the project from "Gemini Portal" to "SmolNet Portal", and revamped the homepage.</li>
    <li>Added protocol support for <i>gopher://</i> and <i>gophers://</i> (finally!).</li>
    <li>Added protocol support for the brand new <i>nex://</i> protocol.</li>
    <li>The proxy response will now automatically switch to streaming mode for files over 1 MB.</li>
    <li>Removed the [inline images] feature, I have plans to expand on this idea in the future.</li>
    <li>Added (external indicators) next to links in gemini documents.</li>
    <li>Added support for the unofficial `---` (horizontal rule) gemini line type.</li>
    <li>Improved error pages, and various other minor tweaks.</li>
  </ul>
  <h3>2023-05-17</h3>
  <ul>
    <li>Link lines that start with an emoji character will no longer underline the emoji.</li>
  </ul>
  <h3>2023-03-16</h3>
  <ul>
    <li>Fixed intermittent 500 errors (hopefully ðŸ¤ž).</li>
    <li>Fixed clicking to enlarge images.</li>
  </ul>
  <h3>2023-02-22</h3>
  <ul>
    <li>Fixed the construction of relative URLs using the <i>finger://</i> scheme.</li>
  </ul>
  <h3>2023-01-18</h3>
  <p>
    This release marks a major milestone and rewrite of the proxy server,
    geared towards improving performance on my poor VPC instance. Please
    let me know if you encounter any broken links or pages that were
    previously working, and I'll do my best to fix them.
  </p>
  <ul>
    <li>The proxy codebase is now hosted publicly at <a href="https://github.com/michael-lazar/gemini-portal">https://github.com/michael-lazar/gemini-portal</a>
    </li>
    <li>The server now has an actual <a href="/">homepage</a>.</li>
    <li>Added proxy support for the <a href="/finger/mozz.us/michael"><i>finger://</i></a> protocol.</li>
    <li>Added click-to-zoom for images via optional javascript.</li>
    <li>The server is now enforcing a 10s connect timeout for proxied hosts.</li>
    <li>Added link detection in <em>text/plain</em> responses via regular expressions.</li>
    <li>Revamped URL parsing and normalization engine for all protocols.</li>
    <li>Added graceful handling for pages with invalid character encodings.</li>
    <li>Large responses (bigger than 8MB) are now handled more efficiently.</li>
    <li>Removed support for the legacy <em>?reflow=</em> query parameters.</li>
  </ul>
  <h3>2021-08-01</h3>
  <ul>
    <li>This proxy is now available over port 80! <a href="http://portal.mozz.us">http://portal.mozz.us</a>
    </li>
    <li>Removed the &lt;a&gt; tags from headers, because they render poorly in some browsers.
  </ul>
  <h3>2021-07-03</h3>
  <ul>
    <li>
      URL fragments on gemini URLs will now anchor to page headers in text/gemini documents.
      See the <a href="https://gitlab.com/gemini-specification/gemini-text/-/issues/3#note_519439831">protocol
      discussion thread</a> for more details.
    </li>
  </ul>
  <h3>2021-04-18</h3>
  <ul>
    <li>Added proxy support for the <a href="/text/txt.textprotocol.org/">text://</a> protocol.</li>
  </ul>
  <h3>2021-04-17</h3>
  <ul>
    <li>Updated networking to support IPv6 gemini servers.</li>
    <li>Updated OpenSSL library - TLS 1.3 and Ed25519 keys are now supported.</li>
  </ul>
  <h3>2021-03-24</h3>
  <ul>
    <li>Disabled autocomplete & spell checking on the URL input bar.</li>
    <li>Added proxy support for the spartan:// protocol.</li>
  </ul>
  <h3>2021-03-05</h3>
  <ul>
    <li>Added "blocking access" section to the <a href="/about">about</a> page.</li>
  </ul>
  <h3>2021-02-07</h3>
  <ul>
    <li>Prevent automatic redirects from <em>gemini://example.com</em> to <em>gemini://example.com/</em>.</li>
  </ul>
  <h3>2021-02-07</h3>
  <ul>
    <li>Better error handling if a link line contains an invalid URL.</li>
  </ul>
  <h3>2021-02-06</h3>
  <ul>
    <li>Emoji favicons will now be rendered as the <em>actual</em> site favicon thanks to a neat svg hack.</li>
  </ul>
  <h3>2021-01-05</h3>
  <ul>
    <li>Dropped the css <em>max-width</em> from 120ch to 100ch.</li>
  </ul>
  <h3>2020-12-28</h3>
  <ul>
    <li>Added a new <a href="/gemini/mozz.us/?inline=1">[inline images]</a> button to toggle viewing images in <em>text/gemini</em>
      documents.
    </li>
    <li>Gemini capsule robots.txt files are no longer checked, since nobody seems to care about this in the context of a
      web proxy...
    </li>
  </ul>
  <h3>2020-12-15</h3>
  <ul>
    <li>Added support for <em>;rÐ°bbiÎ¤;</em> formatting flags.
      <pre>
          /|
    /\   //
   |/\'-'/ .::.
     /^Y^\::''.
     \_ /=| `'
    /`_)=( \
    \ /=/'-/
   {/ |/  \
  __\  _  /__
 '----' '----'
    </pre>
    </li>
  </ul>
  <h3>2020-11-27</h3>
  <ul>
    <li>Fixed Apache behavior that was causing repeated slashes to be normalized inside of gemini URLs.</li>
  </ul>
  <h3>2020-11-10</h3>
  <ul>
    <li>Added more TLS connection information to the <a href="/gemini/mozz.us/?crt=1">[view cert]</a> page.</li>
  </ul>
  <h3>2020-10-11</h3>
  <ul>
    <li>Added a site header with links to the new <a href="/changes">changes</a> & <a href="/about">about</a> sections.
    </li>
    <li>Gemini capsule robots.txt files are now checked and respected by this proxy.</li>
  </ul>
{% endblock %}
